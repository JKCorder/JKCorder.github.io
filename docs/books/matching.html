<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Matching | Political Science and Applied Statistics using R</title>
<meta name="author" content="J.K. Corder">
<meta name="description" content="5 What is matching? Matching is an approach to estimating treatment effects or causal effects by pruning data to create treatment and control groups that are very similar. We know that...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Matching | Political Science and Applied Statistics using R">
<meta property="og:type" content="book">
<meta property="og:description" content="5 What is matching? Matching is an approach to estimating treatment effects or causal effects by pruning data to create treatment and control groups that are very similar. We know that...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Matching | Political Science and Applied Statistics using R">
<meta name="twitter:description" content="5 What is matching? Matching is an approach to estimating treatment effects or causal effects by pruning data to create treatment and control groups that are very similar. We know that...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Political Science and Applied Statistics using R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li><a class="" href="why-math-why-r.html"><span class="header-section-number">1</span> Why math? Why R?</a></li>
<li><a class="" href="regression-review-and-assumptions.html"><span class="header-section-number">2</span> Regression: review and assumptions</a></li>
<li><a class="" href="logistic-regression.html"><span class="header-section-number">3</span> Logistic regression</a></li>
<li><a class="" href="using-interaction-terms.html"><span class="header-section-number">4</span> Using interaction terms</a></li>
<li><a class="" href="working-with-time-series.html"><span class="header-section-number">5</span> Working with time series</a></li>
<li><a class="" href="dynamic-models-1.html"><span class="header-section-number">6</span> Dynamic models</a></li>
<li><a class="" href="working-with-panel-data.html"><span class="header-section-number">7</span> Working with panel data</a></li>
<li><a class="" href="working-with-time-series-cross-sectional-tscs-data.html"><span class="header-section-number">8</span> Working with Time-Series Cross-Sectional (TSCS) data</a></li>
<li><a class="" href="counts.html"><span class="header-section-number">9</span> Counts</a></li>
<li><a class="" href="duration-models.html"><span class="header-section-number">10</span> Duration models</a></li>
<li><a class="" href="references.html"><span class="header-section-number">11</span> References</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="using-the-american-national-election-study.html">Using the American National Election Study</a></li>
<li><a class="" href="the-harvard-dataverse-1.html">The Harvard Dataverse</a></li>
<li><a class="" href="replicating-when-do-politicians-grandstand.html">Replicating “When do politicians grandstand?”</a></li>
<li class="book-part">Short Introductions</li>
<li><a class="" href="quasi--and-natural-experiments.html">Quasi- and natural experiments</a></li>
<li><a class="active" href="matching.html">Matching</a></li>
<li><a class="" href="multilevel-and-hierarchical-models.html">Multilevel and hierarchical models</a></li>
<li><a class="" href="about-the-author.html">About the author</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="matching" class="section level1 unnumbered">
<h1>Matching<a class="anchor" aria-label="anchor" href="#matching"><i class="fas fa-link"></i></a>
</h1>
<div id="what-is-matching" class="section level2" number="11.5">
<h2>
<span class="header-section-number">5</span> What is matching?<a class="anchor" aria-label="anchor" href="#what-is-matching"><i class="fas fa-link"></i></a>
</h2>
<p>Matching is an approach to estimating treatment effects or causal effects by pruning data to create treatment and control groups that are very similar.</p>
<p>We know that observational data (distinct from experimental data) involves non-random assignment to control and treatment groups, so there could be some variable that is related to whether or not you are in treatment group and related to the level of the outcome variable. If this is the case and we neglect to control for that variable, then our estimate of the impact of the treatment effect will be biased. Matching involves making sure that the treatment and control groups have very similar levels of the various observed control variables - to ensure that the groups are as similar as possible in order to isolate the effect of the treatment variable or key predictor we are interested in.</p>
<p>The regression discontinuity designs followed a similar logic, focusing on a subset of observations near some arbitrary threshold. Matching doesn’t require the quasi- or natural experiment design. It can be applied to any observational data.</p>
</div>
<div id="describing-treatment-effects-1" class="section level2" number="11.6">
<h2>
<span class="header-section-number">6</span> Describing treatment effects<a class="anchor" aria-label="anchor" href="#describing-treatment-effects-1"><i class="fas fa-link"></i></a>
</h2>
<p>We will use the same language or conventions to describe data and outcomes as we used last week. In experiments, we are interested in observing and measuring some outcome in order to estimate a treatment effect. We are simply interested in the difference in the outcome variable Y<sub>i</sub> for people who did and did not receive the treatment. For the examples and equations below, T<sub>i</sub> will represent the treatment. The average treatment effect is simply the difference between the expected value of the outcome for people who did receive the treatment and the expected value of the outcome for people who did not receive the treatment.</p>
<p><span class="math display">\[\text{Average Treatment Effect} =  E(Y_i\vert T_i=1) -  E(Y_i\vert T_i=0)\]</span></p>
<p>In this context, work on matching carefully distinguishes between pre-treatment differences (both measured and unmeasured) and post-treatment differences. The idea is that we need to take into account and control for relevant pre-treatment differences when we calculate the average treatment effect.</p>
<p>As was the case last week, we consider a classical randomized experiment as an ideal type. In this context, individual observations are randomly sampled from a population, assignment to treatment and control groups is random, and the sample size is large. This means we avoid both selection bias (sample deviating from population) and omitted variable bias (since nothing will covary with the treatment assignment).</p>
<p>Observational research can fail to meet any of these criteria - we may have selection bias (a function of how we selected cases to observe and measure), we may have omitted crucial variables X<sub>i</sub> which influence both T<sub>i</sub> and Y<sub>i</sub> and we may have relatively few opportunities to observe (small n).</p>
<p>On top of the three features above, we also are imposing some other assumptions - that none of the pre-treatment covariates are a function of T, that units are independent of each other (no spatial or temporal correlation) and that the treatment intensity is the same across all units.</p>
<p>In experimental or observational contexts, we can attempt to estimate the average treatment effect by including the treatment indicator and the pre-treatment covariates in one model.</p>
<p>This looks like the <em>differences estimator with additional regressors,</em> introduced in the chapter on quasi-experiements, but we are recognizing that treatment T<sub>i</sub> is not randomly assigned so it is not independent of the the pre-treatment characteristic X<sub>i</sub> and we are not imposing a linear functional form.</p>
<p><span class="math display">\[Y_i = f(T_i, X_i)\]</span></p>
</div>
<div id="why-use-matching" class="section level2" number="11.7">
<h2>
<span class="header-section-number">7</span> Why use matching?<a class="anchor" aria-label="anchor" href="#why-use-matching"><i class="fas fa-link"></i></a>
</h2>
<p><span class="citation"><a href="references.html#ref-hiks2007" role="doc-biblioref">Ho et al.</a> (<a href="references.html#ref-hiks2007" role="doc-biblioref">2007</a>)</span> make the case that matching can dramatically reduce what they label <em>model dependence.</em> The idea is that when we try to estimate the effects of some T on some Y we have to make many choices about model specification (which covariates?), functional form (OLS or count model?), and how variables are transformed (logs or squares or interaction terms). All of these choice imply an impossibly large number of permutations, but we typically only report and publish a handful of alternatives.</p>
<p>There is a pernicious dynamic at work here: researchers may bias results by picking a specification that returns estimates that confirm their expectations. <span class="citation"><a href="references.html#ref-king_nielsen_2019" role="doc-biblioref">King and Nielsen</a> (<a href="references.html#ref-king_nielsen_2019" role="doc-biblioref">2019</a>)</span> explain: “The tendency to imperceptibly favor one’s own hypotheses, or to be swayed in unanticipated directions even without strong priors, is unavoidable. People do not have easy access to their own mental processes and they have little self-evident information to use to avoid the problem … To make matters worse, subject matter experts overestimate their ability to control their personal biases more than nonexperts, and more prominent experts are the most overconfident … Moreover, training researchers to make better qualitative decisions based on empirical estimates when there exists little information to choose among them scientifically is unlikely to reduce bias even if taught these social-psychological results.” (cites omitted)</p>
<p>As an example, <span class="citation"><a href="references.html#ref-hiks2007" role="doc-biblioref">Ho et al.</a> (<a href="references.html#ref-hiks2007" role="doc-biblioref">2007</a>)</span> construct a dataset with three variables - an outcome (Y<sub>i</sub>, the outcome), a dummy treatment variable (T<sub>i</sub>) and a single covariate X<sub>i</sub>, education) that is related to treatment. They estimate the treatment effect using two approaches, first OLS - a linear model - and then a quadratic, nonlinear model (by adding a squared X term). The difference in intercepts in each case is our estimate of the treatment effect. You can see in Figure 1 that the two functional forms - quadratic and linear - when applied to the entire set of data - yield two very different estimates of the effect of treatment - the treatment effect is positive when we use a linear model and negative when we use a quadratic fit.</p>
<div class="inline-figure"><img src="14-matching_files/figure-html/figure1-1.png" width="672"></div>
<p>You can probably guess the source of the problem here - all of the treated individuals are in the middle of the distribution of X, while we have control subjects at the extremes. So we are only observing the effect of treatment in a narrow range of <span class="math inline">\(X\)</span>. This is labeled a <em>common support</em> problem and one simple fix is to exclude any observations in the control group where X is lower than minimum X observed in the treatment group or X is higher than the maximum X observed in the treatment group.
## How matching works</p>
<p>Matching means trimming or pruning the data to balance our treatment and control group. You can see that the treatment and control have a much different distribution on the key covariate above. We will use the <code>MatchIt</code> package to generate an 1:1 match between each treated observation and one control.</p>
<p>In this case, we have many more controls than treated observations, so 1:1 matching means excluding many control observations.</p>
<p>Recall that one of the prescriptions for data collection to improve causal inference is to maximize the variation in X, so we are making a trade-off between reducing bias and reducing efficiency. More observations means more efficiency, but fewer observations means more balance between the control an d treatment groups.</p>
<p>The output below reports the results of the matching, comparing the values of X for the treatment and control groups for all data and for the matched data. You can see that the control group mean on X was 12.59, much lower than the treatment group, but matching reduced that difference by 54%, by elimnating 22 observations that did not have a match in the treatment group. We can summarize this improvement in a simple figure.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="matching.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify a match object and match using nearest neighbor method without propensity scoring - this is a different match method from the original article</span></span>
<span id="cb144-2"><a href="matching.html#cb144-2" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">matchit</span>(t <span class="sc">~</span> x, <span class="at">data=</span>dta, <span class="at">method=</span><span class="st">"nearest"</span>, <span class="at">distance=</span><span class="st">"mahalanobis"</span>)</span>
<span id="cb144-3"><a href="matching.html#cb144-3" aria-hidden="true" tabindex="-1"></a>matched <span class="ot">&lt;-</span> <span class="fu">match.data</span>(temp)</span>
<span id="cb144-4"><a href="matching.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(temp)</span>
<span id="cb144-5"><a href="matching.html#cb144-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-6"><a href="matching.html#cb144-6" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span></span>
<span id="cb144-7"><a href="matching.html#cb144-7" aria-hidden="true" tabindex="-1"></a><span class="fu">matchit</span>(<span class="at">formula =</span> t <span class="sc">~</span> x, <span class="at">data =</span> dta, <span class="at">method =</span> <span class="st">"nearest"</span>, <span class="at">distance =</span> <span class="st">"mahalanobis"</span>)</span>
<span id="cb144-8"><a href="matching.html#cb144-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-9"><a href="matching.html#cb144-9" aria-hidden="true" tabindex="-1"></a>Summary of Balance <span class="cf">for</span> All Data<span class="sc">:</span></span>
<span id="cb144-10"><a href="matching.html#cb144-10" aria-hidden="true" tabindex="-1"></a>  Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean eCDF Max</span>
<span id="cb144-11"><a href="matching.html#cb144-11" aria-hidden="true" tabindex="-1"></a>x       <span class="fl">15.5392</span>       <span class="fl">12.5973</span>          <span class="fl">1.0206</span>     <span class="fl">0.0927</span>    <span class="fl">0.2077</span>   <span class="fl">0.4161</span></span>
<span id="cb144-12"><a href="matching.html#cb144-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-13"><a href="matching.html#cb144-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-14"><a href="matching.html#cb144-14" aria-hidden="true" tabindex="-1"></a>Summary of Balance <span class="cf">for</span> Matched Data<span class="sc">:</span></span>
<span id="cb144-15"><a href="matching.html#cb144-15" aria-hidden="true" tabindex="-1"></a>  Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean eCDF Max</span>
<span id="cb144-16"><a href="matching.html#cb144-16" aria-hidden="true" tabindex="-1"></a>x       <span class="fl">15.5392</span>       <span class="fl">14.1854</span>          <span class="fl">0.4696</span>     <span class="fl">0.3878</span>    <span class="fl">0.1182</span>   <span class="fl">0.3636</span></span>
<span id="cb144-17"><a href="matching.html#cb144-17" aria-hidden="true" tabindex="-1"></a>  Std. Pair Dist.</span>
<span id="cb144-18"><a href="matching.html#cb144-18" aria-hidden="true" tabindex="-1"></a>x          <span class="fl">0.8685</span></span>
<span id="cb144-19"><a href="matching.html#cb144-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-20"><a href="matching.html#cb144-20" aria-hidden="true" tabindex="-1"></a>Percent Balance Improvement<span class="sc">:</span></span>
<span id="cb144-21"><a href="matching.html#cb144-21" aria-hidden="true" tabindex="-1"></a>  Std. Mean Diff. Var. Ratio eCDF Mean eCDF Max</span>
<span id="cb144-22"><a href="matching.html#cb144-22" aria-hidden="true" tabindex="-1"></a>x              <span class="dv">54</span>       <span class="fl">60.2</span>      <span class="fl">43.1</span>     <span class="fl">12.6</span></span>
<span id="cb144-23"><a href="matching.html#cb144-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-24"><a href="matching.html#cb144-24" aria-hidden="true" tabindex="-1"></a>Sample Sizes<span class="sc">:</span></span>
<span id="cb144-25"><a href="matching.html#cb144-25" aria-hidden="true" tabindex="-1"></a>          Control Treated</span>
<span id="cb144-26"><a href="matching.html#cb144-26" aria-hidden="true" tabindex="-1"></a>All            <span class="dv">39</span>      <span class="dv">22</span></span>
<span id="cb144-27"><a href="matching.html#cb144-27" aria-hidden="true" tabindex="-1"></a>Matched        <span class="dv">22</span>      <span class="dv">22</span></span>
<span id="cb144-28"><a href="matching.html#cb144-28" aria-hidden="true" tabindex="-1"></a>Unmatched      <span class="dv">17</span>       <span class="dv">0</span></span>
<span id="cb144-29"><a href="matching.html#cb144-29" aria-hidden="true" tabindex="-1"></a>Discarded       <span class="dv">0</span>       <span class="dv">0</span></span>
<span id="cb144-30"><a href="matching.html#cb144-30" aria-hidden="true" tabindex="-1"></a><span class="fu">frame</span>()</span>
<span id="cb144-31"><a href="matching.html#cb144-31" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">summary</span>(temp), <span class="at">threshold=</span><span class="cn">NA</span>, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">1.5</span>))</span></code></pre></div>
<div class="inline-figure"><img src="14-matching_files/figure-html/figure2-1.png" width="672"></div>
<p>The figure below reproduces the estimate of the treatment effect using the matched data, excluding the observations identified in red.</p>
<p>The estimates, using either functional formal, suggest that there is no treatment effect. So, in this case we reduced the variation in X in our sample, but improved our estimate.</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Linear model - matched data</span>
<span class="va">lm.m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">t</span><span class="op">+</span><span class="va">x</span>, data<span class="op">=</span><span class="va">matched</span><span class="op">)</span>


<span class="co"># Quadratic model - matched data</span>
<span class="va">lm.m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">t</span><span class="op">+</span><span class="va">x</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>, data<span class="op">=</span><span class="va">matched</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">matched</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="va">matched</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span>, <span class="va">matched</span><span class="op">$</span><span class="va">y</span><span class="op">[</span><span class="va">matched</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span>,
     pch<span class="op">=</span><span class="st">"T"</span>, xlab<span class="op">=</span><span class="st">"Education"</span>, ylab<span class="op">=</span><span class="st">"Outcome"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">dta</span><span class="op">$</span><span class="va">x</span><span class="op">)</span>,
     ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">dta</span><span class="op">$</span><span class="va">y</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">0.8</span>, main<span class="op">=</span><span class="st">"After Matching"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">matched</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="va">matched</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="fl">0</span><span class="op">]</span>, <span class="va">matched</span><span class="op">$</span><span class="va">y</span><span class="op">[</span><span class="va">matched</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="fl">0</span><span class="op">]</span>, pch<span class="op">=</span><span class="st">"C"</span>, cex<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/points.html">points</a></span><span class="op">(</span><span class="va">dta</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="va">temp</span><span class="op">$</span><span class="va">weights</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">dta</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="fl">0</span><span class="op">]</span>,
       <span class="va">dta</span><span class="op">$</span><span class="va">y</span><span class="op">[</span><span class="va">temp</span><span class="op">$</span><span class="va">weights</span><span class="op">==</span><span class="fl">0</span> <span class="op">&amp;</span> <span class="va">dta</span><span class="op">$</span><span class="va">t</span><span class="op">==</span><span class="fl">0</span><span class="op">]</span>,
       pch<span class="op">=</span><span class="st">"C"</span>, col<span class="op">=</span><span class="st">"red"</span>, cex<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">plot.pts2</span>, <span class="va">lm.m1</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">lm.m1</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span> <span class="va">lm.m1</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">*</span><span class="va">plot.pts2</span>, lty<span class="op">=</span><span class="fl">1</span>, lwd<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">plot.pts2</span>, <span class="va">lm.m1</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">lm.m1</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">*</span><span class="va">plot.pts2</span>, lty<span class="op">=</span><span class="fl">1</span>, col<span class="op">=</span><span class="st">"darkgrey"</span>, lwd<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">plot.pts2</span>, <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">+</span>
      <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">*</span><span class="va">plot.pts2</span> <span class="op">+</span> <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">*</span><span class="va">plot.pts2</span><span class="op">^</span><span class="fl">2</span>,
      lty<span class="op">=</span><span class="fl">2</span>, lwd<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">plot.pts2</span>, <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">*</span><span class="va">plot.pts2</span> <span class="op">+</span>
      <span class="va">lm.m2</span><span class="op">$</span><span class="va">coef</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">*</span><span class="va">plot.pts2</span><span class="op">^</span><span class="fl">2</span>, lty<span class="op">=</span><span class="fl">2</span>, col<span class="op">=</span><span class="st">"darkgrey"</span>, lwd<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">4.75</span>, lty<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">8</span>, <span class="fl">1</span>, <span class="fl">8</span><span class="op">)</span>, lwd<span class="op">=</span><span class="fl">1.5</span>,
       legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Linear Model, Treated Group"</span>,
         <span class="st">"Linear Model, Control Group"</span>,
         <span class="st">"Quadratic Model, Treated Group"</span>,
         <span class="st">"Quadratic Model, Control Group"</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="14-matching_files/figure-html/figure3-1.png" width="672"></div>
<div id="the-method-of-matching-matters" class="section level3" number="11.7.1">
<h3>
<span class="header-section-number">7.1</span> The method of matching matters<a class="anchor" aria-label="anchor" href="#the-method-of-matching-matters"><i class="fas fa-link"></i></a>
</h3>
<p>In the example above, we simply used one covariate, but we could have (and often have) situations where the treatment group and control group are different in several ways - you could imagine a case where the control group was higher education or higher income or more likely to live in urban areas or all of these.</p>
<p>In order to match in these situations MatchIt employs a logistic regression to calculate a <em>propensity score</em> - the probability of being part of the treatment group based on the covariates. We can then match observations with similar levels of the propensity score - implying similar levels on the covariates.</p>
<p>Recent work, <span class="citation"><a href="references.html#ref-king_nielsen_2019" role="doc-biblioref">King and Nielsen</a> (<a href="references.html#ref-king_nielsen_2019" role="doc-biblioref">2019</a>)</span>, suggests that propensity scoring can result in cases that are not ideal matches - like pairing two observations with a similar propensity score where one person has high income and low education and the other has low income and high education. We calculate the same propensity score for very different subjects. While the default in MatchIt is to use this prospensity scoring approach, we can use other, preferred approaches in the same package.</p>
<p>Here are three options:</p>
<ul>
<li>matchit(y~x1+x2, data=data)</li>
<li>matchit(y~x1+x2, data=data, method=“nearest,” distance=“mahalanobis”)</li>
<li>matchit(y~x1+x2, data=data, method=“genetic”)</li>
</ul>
<p>The first method is nearest neighbor based on propensity scores, the default and the most widely used in the literature. The Mahalanobis distance matching method measures each covariate imbalance individually, rather than aggregating to a propensity score. The genetic matching method borrows from both. It is easy to do each of these, to test the sensitivity of the results to the matching method - each approach will prune different observations.</p>
</div>
</div>
<div id="two-applications" class="section level2" number="11.8">
<h2>
<span class="header-section-number">8</span> Two applications<a class="anchor" aria-label="anchor" href="#two-applications"><i class="fas fa-link"></i></a>
</h2>
<div id="union-membership-and-campaign-activity" class="section level3" number="11.8.1">
<h3>
<span class="header-section-number">8.1</span> Union membership and campaign activity<a class="anchor" aria-label="anchor" href="#union-membership-and-campaign-activity"><i class="fas fa-link"></i></a>
</h3>
<p>To continue with a simple example, consider the model of turnout we used early in the term - we predicted the probability of turnout based on age, education, income, gender and race. What about the effect of living in a union household? You might expect a member of union household to be mobilized or engaged and more likely to vote. We could test that with logistic regression, controlling for a variety of other controls. I did not echo the code chunk that reads the ANES data, but it is visible in the RMD file.</p>
<p>The code chunk below selects the 1992 presidential election year, creates a subset of just the variables we are interested and drops any observation with missing values for any variable. The <code>drop_na()</code> function requires the <strong>tidyverse</strong> package.</p>
<p>The table reports the results of four regressions - all logit - with different control variables added.</p>
<p>The effect of union is positive in each case, but the size of estimated effect varies across model specifications. We would need to convert the logistic to a proportion or probability to see exactly the size of effects implied.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="matching.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter to select 1992</span></span>
<span id="cb146-2"><a href="matching.html#cb146-2" aria-hidden="true" tabindex="-1"></a>temp1 <span class="ot">&lt;-</span> anes <span class="sc">%&gt;%</span> <span class="fu">filter</span>(VCF0004<span class="sc">==</span><span class="dv">1992</span>)  <span class="sc">%&gt;%</span> <span class="fu">select</span>(turnout, age, education, income, union, minority, female) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb146-3"><a href="matching.html#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="matching.html#cb146-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-5"><a href="matching.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="co"># estimate a logistic regission  of turnout </span></span>
<span id="cb146-6"><a href="matching.html#cb146-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-7"><a href="matching.html#cb146-7" aria-hidden="true" tabindex="-1"></a>model1<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union, <span class="at">data=</span>temp1, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb146-8"><a href="matching.html#cb146-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-9"><a href="matching.html#cb146-9" aria-hidden="true" tabindex="-1"></a>model2<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union<span class="sc">+</span>education, <span class="at">data=</span>temp1, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb146-10"><a href="matching.html#cb146-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-11"><a href="matching.html#cb146-11" aria-hidden="true" tabindex="-1"></a>model3<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union<span class="sc">+</span>education<span class="sc">+</span>age<span class="sc">+</span>income, <span class="at">data=</span>temp1, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb146-12"><a href="matching.html#cb146-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-13"><a href="matching.html#cb146-13" aria-hidden="true" tabindex="-1"></a>model4<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union<span class="sc">+</span>education<span class="sc">+</span>age<span class="sc">+</span>income<span class="sc">+</span>minority<span class="sc">+</span>female, <span class="at">data=</span>temp1, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb146-14"><a href="matching.html#cb146-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-15"><a href="matching.html#cb146-15" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(model1, model2, model3, model4, <span class="at">style=</span><span class="st">"qje"</span>, <span class="at">type=</span><span class="st">"text"</span> , <span class="at">omit=</span><span class="st">"factor"</span> , <span class="at">dep.var.labels =</span> <span class="fu">c</span>(<span class="st">"Turnout"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>), <span class="at">digits=</span><span class="dv">3</span>)</span>
<span id="cb146-16"><a href="matching.html#cb146-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-17"><a href="matching.html#cb146-17" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">=========================================================</span></span>
<span id="cb146-18"><a href="matching.html#cb146-18" aria-hidden="true" tabindex="-1"></a>                                   Turnout                 </span>
<span id="cb146-19"><a href="matching.html#cb146-19" aria-hidden="true" tabindex="-1"></a>                      (<span class="dv">1</span>)        (<span class="dv">2</span>)       (<span class="dv">3</span>)       (<span class="dv">4</span>)   </span>
<span id="cb146-20"><a href="matching.html#cb146-20" aria-hidden="true" tabindex="-1"></a><span class="sc">-----------------------------------------------------------</span></span>
<span id="cb146-21"><a href="matching.html#cb146-21" aria-hidden="true" tabindex="-1"></a>union              <span class="fl">0.772</span><span class="sc">**</span><span class="er">*</span>   <span class="fl">0.742</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.526</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.540</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb146-22"><a href="matching.html#cb146-22" aria-hidden="true" tabindex="-1"></a>                    (<span class="fl">0.165</span>)    (<span class="fl">0.171</span>)   (<span class="fl">0.179</span>)   (<span class="fl">0.179</span>) </span>
<span id="cb146-23"><a href="matching.html#cb146-23" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-24"><a href="matching.html#cb146-24" aria-hidden="true" tabindex="-1"></a>education                     <span class="fl">0.482</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.532</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.529</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb146-25"><a href="matching.html#cb146-25" aria-hidden="true" tabindex="-1"></a>                               (<span class="fl">0.035</span>)   (<span class="fl">0.044</span>)   (<span class="fl">0.044</span>) </span>
<span id="cb146-26"><a href="matching.html#cb146-26" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-27"><a href="matching.html#cb146-27" aria-hidden="true" tabindex="-1"></a>age                                     <span class="fl">0.040</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.039</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb146-28"><a href="matching.html#cb146-28" aria-hidden="true" tabindex="-1"></a>                                         (<span class="fl">0.004</span>)   (<span class="fl">0.004</span>) </span>
<span id="cb146-29"><a href="matching.html#cb146-29" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-30"><a href="matching.html#cb146-30" aria-hidden="true" tabindex="-1"></a>income                                  <span class="fl">0.380</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.383</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb146-31"><a href="matching.html#cb146-31" aria-hidden="true" tabindex="-1"></a>                                         (<span class="fl">0.057</span>)   (<span class="fl">0.059</span>) </span>
<span id="cb146-32"><a href="matching.html#cb146-32" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-33"><a href="matching.html#cb146-33" aria-hidden="true" tabindex="-1"></a>minority                                           <span class="sc">-</span><span class="fl">0.120</span>  </span>
<span id="cb146-34"><a href="matching.html#cb146-34" aria-hidden="true" tabindex="-1"></a>                                                   (<span class="fl">0.135</span>) </span>
<span id="cb146-35"><a href="matching.html#cb146-35" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-36"><a href="matching.html#cb146-36" aria-hidden="true" tabindex="-1"></a>female                                              <span class="fl">0.174</span>  </span>
<span id="cb146-37"><a href="matching.html#cb146-37" aria-hidden="true" tabindex="-1"></a>                                                   (<span class="fl">0.119</span>) </span>
<span id="cb146-38"><a href="matching.html#cb146-38" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-39"><a href="matching.html#cb146-39" aria-hidden="true" tabindex="-1"></a>Constant           <span class="fl">1.034</span><span class="sc">**</span><span class="er">*</span>   <span class="sc">-</span><span class="fl">0.732</span><span class="sc">**</span><span class="er">*</span> <span class="sc">-</span><span class="fl">3.638</span><span class="sc">**</span><span class="er">*</span> <span class="sc">-</span><span class="fl">3.678</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb146-40"><a href="matching.html#cb146-40" aria-hidden="true" tabindex="-1"></a>                    (<span class="fl">0.055</span>)    (<span class="fl">0.132</span>)   (<span class="fl">0.281</span>)   (<span class="fl">0.310</span>) </span>
<span id="cb146-41"><a href="matching.html#cb146-41" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb146-42"><a href="matching.html#cb146-42" aria-hidden="true" tabindex="-1"></a>N                    <span class="dv">2</span>,<span class="dv">025</span>      <span class="dv">2</span>,<span class="dv">025</span>     <span class="dv">2</span>,<span class="dv">025</span>     <span class="dv">2</span>,<span class="dv">025</span>  </span>
<span id="cb146-43"><a href="matching.html#cb146-43" aria-hidden="true" tabindex="-1"></a>Log Likelihood    <span class="sc">-</span><span class="dv">1</span>,<span class="fl">108.069</span>  <span class="sc">-</span><span class="fl">998.532</span>  <span class="sc">-</span><span class="fl">912.627</span>  <span class="sc">-</span><span class="fl">911.201</span> </span>
<span id="cb146-44"><a href="matching.html#cb146-44" aria-hidden="true" tabindex="-1"></a>Akaike Inf. Crit.  <span class="dv">2</span>,<span class="fl">220.137</span>  <span class="dv">2</span>,<span class="fl">003.064</span> <span class="dv">1</span>,<span class="fl">835.254</span> <span class="dv">1</span>,<span class="fl">836.402</span></span>
<span id="cb146-45"><a href="matching.html#cb146-45" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">=========================================================</span></span>
<span id="cb146-46"><a href="matching.html#cb146-46" aria-hidden="true" tabindex="-1"></a>Notes<span class="sc">:</span>               <span class="er">***</span>Significant at the <span class="dv">1</span> percent level.</span>
<span id="cb146-47"><a href="matching.html#cb146-47" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">**</span>Significant at the <span class="dv">5</span> percent level.</span>
<span id="cb146-48"><a href="matching.html#cb146-48" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">*</span>Significant at the <span class="dv">10</span> percent level.</span></code></pre></div>
<p>The code chunk below creates the matched data set, pairing up each relatively rare union household with a non-union household that has similar levels of the covariates. The summary of the matchit object - this time presented as a figure - compares the treatment and control groups - look at the mean of income for the treatment and control groups in all of the data - the union households are much higher. Compare that difference to the difference between the treatment and control groups in the matched sample. Matching dramatically reduces the difference for every characteristic except minority (see “Percent Balance Improvement”).</p>
<p>I used both the propensity scoring approach and the Mahalanobis
distance approach and you can compare how the different matching methods improve balance or not. In this case, I think the propsenity matching is superior, so I will report those results.</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">matched</span> <span class="op">&lt;-</span> <span class="fu">matchit</span><span class="op">(</span><span class="va">union</span> <span class="op">~</span><span class="va">education</span><span class="op">+</span><span class="va">age</span><span class="op">+</span><span class="va">income</span><span class="op">+</span><span class="va">union</span><span class="op">+</span><span class="va">minority</span><span class="op">+</span><span class="va">female</span>, na.action<span class="op">=</span><span class="va">na.exclude</span>, data<span class="op">=</span><span class="va">temp1</span><span class="op">)</span>
<span class="va">temp2</span> <span class="op">&lt;-</span> <span class="fu">match.data</span><span class="op">(</span><span class="va">matched</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">matched</span><span class="op">)</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.1</span>, <span class="fl">0.7</span><span class="op">)</span>, threshold<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="14-matching_files/figure-html/figure4-1.png" width="672"></div>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="va">matched_m</span> <span class="op">&lt;-</span> <span class="fu">matchit</span><span class="op">(</span><span class="va">union</span> <span class="op">~</span><span class="va">education</span><span class="op">+</span><span class="va">age</span><span class="op">+</span><span class="va">income</span><span class="op">+</span><span class="va">union</span><span class="op">+</span><span class="va">minority</span><span class="op">+</span><span class="va">female</span>, na.action<span class="op">=</span><span class="va">na.exclude</span>, data<span class="op">=</span><span class="va">temp1</span>, distance<span class="op">=</span><span class="st">"mahalanobis"</span><span class="op">)</span>
<span class="va">temp3</span> <span class="op">&lt;-</span> <span class="fu">match.data</span><span class="op">(</span><span class="va">matched_m</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">matched_m</span><span class="op">)</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.3</span>, <span class="fl">0.9</span><span class="op">)</span>, threshold<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="14-matching_files/figure-html/figure4-2.png" width="672"></div>
<p>We can compare our estimates with logistic regression using the matched data. You can see that the estimate of the effect of being in a union household is now entirely robust to the inclusion or exclusion of covariates. Not nearly as much model dependence. (There is a bit of sleight of hand here and some researchers have picked up on this - our estimates are now dependent on the covariates that we use to match and the matching method, so a different set of variables used for the propensity score will result in a different set of matched pairs.) There is a recent piece that suggests ways to pick across alternative matching approaches (<span class="citation"><a href="references.html#ref-king2017" role="doc-biblioref">King, Lucas, and Nielsen</a> (<a href="references.html#ref-king2017" role="doc-biblioref">2017</a>)</span>)</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="matching.html#cb149-1" aria-hidden="true" tabindex="-1"></a>model1<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union, <span class="at">data=</span>temp2, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb149-2"><a href="matching.html#cb149-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-3"><a href="matching.html#cb149-3" aria-hidden="true" tabindex="-1"></a>model2<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union<span class="sc">+</span>education, <span class="at">data=</span>temp2, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb149-4"><a href="matching.html#cb149-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-5"><a href="matching.html#cb149-5" aria-hidden="true" tabindex="-1"></a>model3<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union<span class="sc">+</span>education<span class="sc">+</span>age<span class="sc">+</span>income, <span class="at">data=</span>temp2, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb149-6"><a href="matching.html#cb149-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-7"><a href="matching.html#cb149-7" aria-hidden="true" tabindex="-1"></a>model4<span class="ot">&lt;-</span><span class="fu">glm</span>(turnout<span class="sc">~</span>union<span class="sc">+</span>education<span class="sc">+</span>age<span class="sc">+</span>income<span class="sc">+</span>minority<span class="sc">+</span>female, <span class="at">data=</span>temp2, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>))</span>
<span id="cb149-8"><a href="matching.html#cb149-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-9"><a href="matching.html#cb149-9" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(model1, model2, model3, model4, <span class="at">style=</span><span class="st">"qje"</span>, <span class="at">type=</span><span class="st">"text"</span> , <span class="at">omit=</span><span class="st">"factor"</span> , <span class="at">dep.var.labels =</span> <span class="fu">c</span>(<span class="st">"Turnout"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>), <span class="at">digits=</span><span class="dv">3</span>)</span>
<span id="cb149-10"><a href="matching.html#cb149-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-11"><a href="matching.html#cb149-11" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">=========================================================</span></span>
<span id="cb149-12"><a href="matching.html#cb149-12" aria-hidden="true" tabindex="-1"></a>                                   Turnout                 </span>
<span id="cb149-13"><a href="matching.html#cb149-13" aria-hidden="true" tabindex="-1"></a>                     (<span class="dv">1</span>)        (<span class="dv">2</span>)        (<span class="dv">3</span>)       (<span class="dv">4</span>)   </span>
<span id="cb149-14"><a href="matching.html#cb149-14" aria-hidden="true" tabindex="-1"></a><span class="sc">-----------------------------------------------------------</span></span>
<span id="cb149-15"><a href="matching.html#cb149-15" aria-hidden="true" tabindex="-1"></a>union              <span class="fl">0.456</span><span class="sc">**</span>    <span class="fl">0.446</span><span class="sc">**</span>    <span class="fl">0.462</span><span class="sc">**</span>   <span class="fl">0.479</span><span class="sc">**</span> </span>
<span id="cb149-16"><a href="matching.html#cb149-16" aria-hidden="true" tabindex="-1"></a>                   (<span class="fl">0.206</span>)    (<span class="fl">0.212</span>)    (<span class="fl">0.221</span>)   (<span class="fl">0.223</span>) </span>
<span id="cb149-17"><a href="matching.html#cb149-17" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-18"><a href="matching.html#cb149-18" aria-hidden="true" tabindex="-1"></a>education                     <span class="fl">0.455</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.499</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.489</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb149-19"><a href="matching.html#cb149-19" aria-hidden="true" tabindex="-1"></a>                              (<span class="fl">0.075</span>)    (<span class="fl">0.086</span>)   (<span class="fl">0.086</span>) </span>
<span id="cb149-20"><a href="matching.html#cb149-20" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-21"><a href="matching.html#cb149-21" aria-hidden="true" tabindex="-1"></a>age                                     <span class="fl">0.047</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.046</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb149-22"><a href="matching.html#cb149-22" aria-hidden="true" tabindex="-1"></a>                                         (<span class="fl">0.008</span>)   (<span class="fl">0.008</span>) </span>
<span id="cb149-23"><a href="matching.html#cb149-23" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-24"><a href="matching.html#cb149-24" aria-hidden="true" tabindex="-1"></a>income                                  <span class="fl">0.583</span><span class="sc">**</span><span class="er">*</span>  <span class="fl">0.597</span><span class="sc">**</span><span class="er">*</span> </span>
<span id="cb149-25"><a href="matching.html#cb149-25" aria-hidden="true" tabindex="-1"></a>                                         (<span class="fl">0.131</span>)   (<span class="fl">0.134</span>) </span>
<span id="cb149-26"><a href="matching.html#cb149-26" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-27"><a href="matching.html#cb149-27" aria-hidden="true" tabindex="-1"></a>minority                                           <span class="sc">-</span><span class="fl">0.253</span>  </span>
<span id="cb149-28"><a href="matching.html#cb149-28" aria-hidden="true" tabindex="-1"></a>                                                   (<span class="fl">0.250</span>) </span>
<span id="cb149-29"><a href="matching.html#cb149-29" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-30"><a href="matching.html#cb149-30" aria-hidden="true" tabindex="-1"></a>female                                              <span class="fl">0.334</span>  </span>
<span id="cb149-31"><a href="matching.html#cb149-31" aria-hidden="true" tabindex="-1"></a>                                                   (<span class="fl">0.226</span>) </span>
<span id="cb149-32"><a href="matching.html#cb149-32" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-33"><a href="matching.html#cb149-33" aria-hidden="true" tabindex="-1"></a>Constant           <span class="fl">1.350</span><span class="sc">**</span><span class="er">*</span>    <span class="sc">-</span><span class="fl">0.344</span>   <span class="sc">-</span><span class="fl">4.376</span><span class="sc">**</span><span class="er">*</span> <span class="sc">-</span><span class="fl">4.450</span><span class="sc">**</span><span class="er">*</span></span>
<span id="cb149-34"><a href="matching.html#cb149-34" aria-hidden="true" tabindex="-1"></a>                   (<span class="fl">0.134</span>)    (<span class="fl">0.290</span>)    (<span class="fl">0.683</span>)   (<span class="fl">0.724</span>) </span>
<span id="cb149-35"><a href="matching.html#cb149-35" aria-hidden="true" tabindex="-1"></a>                                                           </span>
<span id="cb149-36"><a href="matching.html#cb149-36" aria-hidden="true" tabindex="-1"></a>N                    <span class="dv">680</span>        <span class="dv">680</span>        <span class="dv">680</span>       <span class="dv">680</span>   </span>
<span id="cb149-37"><a href="matching.html#cb149-37" aria-hidden="true" tabindex="-1"></a>Log Likelihood     <span class="sc">-</span><span class="fl">311.285</span>   <span class="sc">-</span><span class="fl">289.659</span>  <span class="sc">-</span><span class="fl">264.559</span>  <span class="sc">-</span><span class="fl">262.960</span> </span>
<span id="cb149-38"><a href="matching.html#cb149-38" aria-hidden="true" tabindex="-1"></a>Akaike Inf. Crit.  <span class="fl">626.569</span>    <span class="fl">585.318</span>    <span class="fl">539.119</span>   <span class="fl">539.920</span> </span>
<span id="cb149-39"><a href="matching.html#cb149-39" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">=========================================================</span></span>
<span id="cb149-40"><a href="matching.html#cb149-40" aria-hidden="true" tabindex="-1"></a>Notes<span class="sc">:</span>               <span class="er">***</span>Significant at the <span class="dv">1</span> percent level.</span>
<span id="cb149-41"><a href="matching.html#cb149-41" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">**</span>Significant at the <span class="dv">5</span> percent level.</span>
<span id="cb149-42"><a href="matching.html#cb149-42" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">*</span>Significant at the <span class="dv">10</span> percent level.</span></code></pre></div>
<p><br></p>
</div>
<div id="fda-drug-approval-times" class="section level3" number="11.8.2">
<h3>
<span class="header-section-number">8.2</span> FDA drug approval times<a class="anchor" aria-label="anchor" href="#fda-drug-approval-times"><i class="fas fa-link"></i></a>
</h3>
<p>One of the works replicated in the matching piece, <span class="citation"><a href="references.html#ref-dc2002" role="doc-biblioref">Carpenter</a> (<a href="references.html#ref-dc2002" role="doc-biblioref">2002</a>)</span>, is from the bureaucratic politics literature. Carpenter uses a duration model of the form we looked at a few weeks ago to investigate determinants of the time it takes for the FDA to approve new drug. The dataset consists of drugs waiting for approval and predictors include features of the disease the drug is intended to treat, the intensity of interest group activity related to the disease, media coverage, as well as the political environment (with a central expectation that Republican influence will speed up drug approval times).</p>
<p>Carpenter ultimately finds that it is disease characteristics, media and interest group activity that explain delays or action, rather than Republican or Democratic control of key parts of Congress. In fact, he finds (and only gives cursory attention to) a Democratic majority in the Senate is associated with faster approval times. The results are summarized in the table below, from the piece. Notice that the coefficient in Democratic Senate Majority is negative and significant, so a shorter approval time.</p>
<p>The bold-faced effects are the most consistent and substantively important: incidence and severity of disease, as well as media coverage and the number of groups (a quadratic).</p>
<div class="inline-figure"><img src="images/Carpenter%202002%20Table%203.png" width="80%"></div>
<p><span class="citation"><a href="references.html#ref-hiks2007" role="doc-biblioref">Ho et al.</a> (<a href="references.html#ref-hiks2007" role="doc-biblioref">2007</a>)</span> demonstrate that changes to modeling choices generate substantial uncertainty about the Senate Democratic Majority effect if we use the entire dataset. But, by employing matching, they are able to reduce the model dependence substantially. The impact of matching is summarized in the figure below.</p>
<div class="inline-figure"><img src="images/hiksfigure2.png" width="90%"></div>
<p>We can replicate the original estimate and test the effect of alternative matching strategies to see if we can get a more balanced set of data than the approach using propensity scores in the article. The figures suggest (and this is a judgment call) that the second method results in a more balanced dataset.</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Slimmed down just to show how matching works</span>

<span class="co">## data</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"data/FDA-Carpenter.csv.txt"</span>, header<span class="op">=</span><span class="cn">T</span>, sep<span class="op">=</span><span class="st">","</span><span class="op">)</span>

<span class="co">## democratic senate as the treatment variable</span>
<span class="va">data</span><span class="op">$</span><span class="va">treat</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">demsnmaj</span>

<span class="co">## rescaling</span>
<span class="va">data</span><span class="op">$</span><span class="va">hospdisc</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">hospdisc</span><span class="op">/</span><span class="fl">100000</span>
<span class="va">data</span><span class="op">$</span><span class="va">natreg</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">natreg</span><span class="op">/</span><span class="fl">100</span>
<span class="va">data</span><span class="op">$</span><span class="va">stafcder</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">stafcder</span><span class="op">/</span><span class="fl">100</span>
<span class="va">data</span><span class="op">$</span><span class="va">prevgenx</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">prevgenx</span><span class="op">/</span><span class="fl">100</span>
<span class="va">data</span><span class="op">$</span><span class="va">hhosleng</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">hhosleng</span><span class="op">/</span><span class="fl">10</span>
<span class="va">data</span><span class="op">$</span><span class="va">condavg3</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">condavg3</span><span class="op">/</span><span class="fl">10</span>
<span class="va">data</span><span class="op">$</span><span class="va">orderent</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">orderent</span><span class="op">/</span><span class="fl">10</span>
<span class="va">data</span><span class="op">$</span><span class="va">vandavg3</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">vandavg3</span><span class="op">/</span><span class="fl">10</span>
<span class="va">data</span><span class="op">$</span><span class="va">wpnoavg3</span> <span class="op">&lt;-</span> <span class="va">data</span><span class="op">$</span><span class="va">wpnoavg3</span><span class="op">/</span><span class="fl">100</span>

<span class="co">## Democratic senate</span>
<span class="va">spec</span> <span class="op">&lt;-</span> <span class="va">treat</span> <span class="op">~</span> <span class="va">orderent</span>  <span class="op">+</span> <span class="va">prevgenx</span>  <span class="op">+</span> <span class="va">lethal</span> <span class="op">+</span>
  <span class="va">deathrt1</span> <span class="op">+</span> <span class="va">hosp01</span> <span class="op">+</span> <span class="va">hospdisc</span> <span class="op">+</span> <span class="va">hhosleng</span> <span class="op">+</span> <span class="va">femdiz01</span> <span class="op">+</span> <span class="va">mandiz01</span> <span class="op">+</span>
  <span class="va">peddiz01</span> <span class="op">+</span> <span class="va">acutediz</span> <span class="op">+</span> <span class="va">orphdum</span> <span class="op">+</span> <span class="va">natreg</span>  <span class="op">+</span>  <span class="va">wpnoavg3</span> <span class="op">+</span>
  <span class="va">vandavg3</span> <span class="op">+</span> <span class="va">condavg3</span> <span class="op">+</span> <span class="va">stafcder</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">hospdisc</span><span class="op">)</span> 

<span class="va">m1.out</span> <span class="op">&lt;-</span> <span class="fu">matchit</span><span class="op">(</span><span class="va">spec</span>, method <span class="op">=</span> <span class="st">"nearest"</span>, data <span class="op">=</span> <span class="va">data</span>,
                 discard<span class="op">=</span><span class="st">"both"</span>, exact<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"acutediz"</span>, <span class="st">"peddiz01"</span>, <span class="st">"hosp01"</span>,
                                   <span class="st">"lethal"</span>, <span class="st">"femdiz01"</span>, <span class="st">"mandiz01"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m1.out</span><span class="op">)</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.7</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="14-matching_files/figure-html/match_fda-1.png" width="672"></div>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">m2.out</span> <span class="op">&lt;-</span> <span class="fu">matchit</span><span class="op">(</span><span class="va">spec</span>, method <span class="op">=</span> <span class="st">"nearest"</span>, distance<span class="op">=</span><span class="st">"mahalanobis"</span>, data <span class="op">=</span> <span class="va">data</span>, exact<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"acutediz"</span>, <span class="st">"peddiz01"</span>, <span class="st">"hosp01"</span>,
                                   <span class="st">"lethal"</span>, <span class="st">"femdiz01"</span>, <span class="st">"mandiz01"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">m2.out</span><span class="op">)</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.7</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="14-matching_files/figure-html/match_fda-2.png" width="672"></div>
</div>
<div id="estimating-the-lognormal-duration-model-with-3-samples" class="section level3" number="11.8.3">
<h3>
<span class="header-section-number">8.3</span> Estimating the lognormal duration model with 3 samples<a class="anchor" aria-label="anchor" href="#estimating-the-lognormal-duration-model-with-3-samples"><i class="fas fa-link"></i></a>
</h3>
<p>With the full data set and two matched datasets, we can estimate the model using a specification and functional form very close to the published work. The estimates from three duration models - the full model, the propensity score matched data, and the other matched data - are reported below.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="matching.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb152-2"><a href="matching.html#cb152-2" aria-hidden="true" tabindex="-1"></a>fullmodel <span class="ot">&lt;-</span> <span class="fu">survreg</span>(<span class="fu">Surv</span>(acttime, d) <span class="sc">~</span> treat <span class="sc">+</span> orderent  <span class="sc">+</span>prevgenx  <span class="sc">+</span> lethal <span class="sc">+</span> deathrt1 <span class="sc">+</span> hosp01 <span class="sc">+</span> hospdisc <span class="sc">+</span> hhosleng <span class="sc">+</span>femdiz01 <span class="sc">+</span> mandiz01 <span class="sc">+</span> peddiz01 <span class="sc">+</span> acutediz <span class="sc">+</span> orphdum <span class="sc">+</span> natreg <span class="sc">+</span> wpnoavg3 <span class="sc">+</span> condavg3 <span class="sc">+</span>vandavg3 <span class="sc">+</span> stafcder <span class="sc">+</span> <span class="fu">I</span>(natreg<span class="sc">^</span><span class="dv">2</span>), <span class="at">dist=</span><span class="st">"lognormal"</span>, <span class="at">data=</span>data)</span>
<span id="cb152-3"><a href="matching.html#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="matching.html#cb152-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-5"><a href="matching.html#cb152-5" aria-hidden="true" tabindex="-1"></a>m1.data <span class="ot">&lt;-</span> <span class="fu">match.data</span>(m1.out)</span>
<span id="cb152-6"><a href="matching.html#cb152-6" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">survreg</span>(<span class="fu">Surv</span>(acttime, d) <span class="sc">~</span> treat <span class="sc">+</span> orderent  <span class="sc">+</span>prevgenx  <span class="sc">+</span> lethal <span class="sc">+</span> deathrt1 <span class="sc">+</span> hosp01 <span class="sc">+</span> hospdisc <span class="sc">+</span> hhosleng <span class="sc">+</span>femdiz01 <span class="sc">+</span> mandiz01 <span class="sc">+</span> peddiz01 <span class="sc">+</span> acutediz <span class="sc">+</span> orphdum <span class="sc">+</span> natreg <span class="sc">+</span> wpnoavg3 <span class="sc">+</span> condavg3 <span class="sc">+</span>vandavg3 <span class="sc">+</span> stafcder <span class="sc">+</span> <span class="fu">I</span>(natreg<span class="sc">^</span><span class="dv">2</span>), <span class="at">dist=</span><span class="st">"lognormal"</span>, <span class="at">data=</span>m1.data)</span>
<span id="cb152-7"><a href="matching.html#cb152-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-8"><a href="matching.html#cb152-8" aria-hidden="true" tabindex="-1"></a>m2.data <span class="ot">&lt;-</span> <span class="fu">match.data</span>(m2.out)</span>
<span id="cb152-9"><a href="matching.html#cb152-9" aria-hidden="true" tabindex="-1"></a>model2<span class="ot">&lt;-</span> <span class="fu">survreg</span>(<span class="fu">Surv</span>(acttime, d) <span class="sc">~</span> treat <span class="sc">+</span> orderent  <span class="sc">+</span>prevgenx  <span class="sc">+</span> lethal <span class="sc">+</span> deathrt1 <span class="sc">+</span> hosp01 <span class="sc">+</span> hospdisc <span class="sc">+</span> hhosleng <span class="sc">+</span>femdiz01 <span class="sc">+</span> mandiz01 <span class="sc">+</span> peddiz01 <span class="sc">+</span> acutediz <span class="sc">+</span> orphdum <span class="sc">+</span> natreg <span class="sc">+</span> wpnoavg3 <span class="sc">+</span> condavg3 <span class="sc">+</span>vandavg3 <span class="sc">+</span> stafcder <span class="sc">+</span> <span class="fu">I</span>(natreg<span class="sc">^</span><span class="dv">2</span>), <span class="at">dist=</span><span class="st">"lognormal"</span>, <span class="at">data=</span>m2.data)</span>
<span id="cb152-10"><a href="matching.html#cb152-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-11"><a href="matching.html#cb152-11" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(fullmodel, model1, model2, <span class="at">style=</span><span class="st">"qje"</span>, <span class="at">type=</span><span class="st">"text"</span> , <span class="at">digits=</span><span class="dv">2</span>)</span>
<span id="cb152-12"><a href="matching.html#cb152-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-13"><a href="matching.html#cb152-13" aria-hidden="true" tabindex="-1"></a><span class="sc">==</span><span class="er">=====================================================</span></span>
<span id="cb152-14"><a href="matching.html#cb152-14" aria-hidden="true" tabindex="-1"></a>                               acttime                 </span>
<span id="cb152-15"><a href="matching.html#cb152-15" aria-hidden="true" tabindex="-1"></a>                    (<span class="dv">1</span>)           (<span class="dv">2</span>)          (<span class="dv">3</span>)     </span>
<span id="cb152-16"><a href="matching.html#cb152-16" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------------------------------------------------</span></span>
<span id="cb152-17"><a href="matching.html#cb152-17" aria-hidden="true" tabindex="-1"></a>treat            <span class="sc">-</span><span class="fl">0.41</span><span class="sc">**</span><span class="er">*</span>       <span class="sc">-</span><span class="fl">0.21</span><span class="sc">*</span>       <span class="sc">-</span><span class="fl">0.45</span><span class="sc">**</span><span class="er">*</span>  </span>
<span id="cb152-18"><a href="matching.html#cb152-18" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.11</span>)        (<span class="fl">0.12</span>)        (<span class="fl">0.13</span>)   </span>
<span id="cb152-19"><a href="matching.html#cb152-19" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-20"><a href="matching.html#cb152-20" aria-hidden="true" tabindex="-1"></a>orderent          <span class="fl">0.14</span><span class="sc">**</span>        <span class="fl">0.18</span><span class="sc">**</span><span class="er">*</span>       <span class="fl">0.13</span><span class="sc">*</span>    </span>
<span id="cb152-21"><a href="matching.html#cb152-21" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.06</span>)        (<span class="fl">0.07</span>)        (<span class="fl">0.08</span>)   </span>
<span id="cb152-22"><a href="matching.html#cb152-22" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-23"><a href="matching.html#cb152-23" aria-hidden="true" tabindex="-1"></a>prevgenx          <span class="fl">0.17</span><span class="sc">**</span><span class="er">*</span>        <span class="fl">0.11</span>         <span class="fl">0.20</span><span class="sc">**</span>   </span>
<span id="cb152-24"><a href="matching.html#cb152-24" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.06</span>)        (<span class="fl">0.07</span>)        (<span class="fl">0.08</span>)   </span>
<span id="cb152-25"><a href="matching.html#cb152-25" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-26"><a href="matching.html#cb152-26" aria-hidden="true" tabindex="-1"></a>lethal             <span class="fl">0.07</span>          <span class="sc">-</span><span class="fl">0.05</span>         <span class="fl">0.13</span>    </span>
<span id="cb152-27"><a href="matching.html#cb152-27" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.19</span>)        (<span class="fl">0.23</span>)        (<span class="fl">0.26</span>)   </span>
<span id="cb152-28"><a href="matching.html#cb152-28" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-29"><a href="matching.html#cb152-29" aria-hidden="true" tabindex="-1"></a>deathrt1         <span class="sc">-</span><span class="fl">0.54</span><span class="sc">**</span><span class="er">*</span>       <span class="sc">-</span><span class="fl">0.44</span><span class="sc">**</span>      <span class="sc">-</span><span class="fl">0.55</span><span class="sc">**</span>   </span>
<span id="cb152-30"><a href="matching.html#cb152-30" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.21</span>)        (<span class="fl">0.21</span>)        (<span class="fl">0.23</span>)   </span>
<span id="cb152-31"><a href="matching.html#cb152-31" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-32"><a href="matching.html#cb152-32" aria-hidden="true" tabindex="-1"></a>hosp01             <span class="fl">0.003</span>         <span class="sc">-</span><span class="fl">0.10</span>        <span class="sc">-</span><span class="fl">0.19</span>    </span>
<span id="cb152-33"><a href="matching.html#cb152-33" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.20</span>)        (<span class="fl">0.23</span>)        (<span class="fl">0.26</span>)   </span>
<span id="cb152-34"><a href="matching.html#cb152-34" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-35"><a href="matching.html#cb152-35" aria-hidden="true" tabindex="-1"></a>hospdisc          <span class="fl">0.15</span><span class="sc">**</span><span class="er">*</span>       <span class="fl">0.15</span><span class="sc">**</span><span class="er">*</span>      <span class="fl">0.19</span><span class="sc">**</span><span class="er">*</span>   </span>
<span id="cb152-36"><a href="matching.html#cb152-36" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.04</span>)        (<span class="fl">0.05</span>)        (<span class="fl">0.06</span>)   </span>
<span id="cb152-37"><a href="matching.html#cb152-37" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-38"><a href="matching.html#cb152-38" aria-hidden="true" tabindex="-1"></a>hhosleng           <span class="sc">-</span><span class="fl">0.07</span>         <span class="sc">-</span><span class="fl">0.01</span>        <span class="sc">-</span><span class="fl">0.03</span>    </span>
<span id="cb152-39"><a href="matching.html#cb152-39" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.15</span>)        (<span class="fl">0.16</span>)        (<span class="fl">0.18</span>)   </span>
<span id="cb152-40"><a href="matching.html#cb152-40" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-41"><a href="matching.html#cb152-41" aria-hidden="true" tabindex="-1"></a>femdiz01          <span class="sc">-</span><span class="fl">0.54</span><span class="sc">*</span>        <span class="sc">-</span><span class="fl">0.56</span><span class="sc">*</span>        <span class="sc">-</span><span class="fl">0.51</span>    </span>
<span id="cb152-42"><a href="matching.html#cb152-42" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.30</span>)        (<span class="fl">0.31</span>)        (<span class="fl">0.33</span>)   </span>
<span id="cb152-43"><a href="matching.html#cb152-43" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-44"><a href="matching.html#cb152-44" aria-hidden="true" tabindex="-1"></a>mandiz01           <span class="sc">-</span><span class="fl">0.13</span>         <span class="fl">0.04</span>         <span class="sc">-</span><span class="fl">0.03</span>    </span>
<span id="cb152-45"><a href="matching.html#cb152-45" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.33</span>)        (<span class="fl">0.35</span>)        (<span class="fl">0.38</span>)   </span>
<span id="cb152-46"><a href="matching.html#cb152-46" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-47"><a href="matching.html#cb152-47" aria-hidden="true" tabindex="-1"></a>peddiz01           <span class="sc">-</span><span class="fl">0.21</span>         <span class="sc">-</span><span class="fl">0.21</span>        <span class="sc">-</span><span class="fl">0.35</span>    </span>
<span id="cb152-48"><a href="matching.html#cb152-48" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.37</span>)        (<span class="fl">0.39</span>)        (<span class="fl">0.43</span>)   </span>
<span id="cb152-49"><a href="matching.html#cb152-49" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-50"><a href="matching.html#cb152-50" aria-hidden="true" tabindex="-1"></a>acutediz           <span class="sc">-</span><span class="fl">0.15</span>         <span class="sc">-</span><span class="fl">0.20</span>        <span class="sc">-</span><span class="fl">0.16</span>    </span>
<span id="cb152-51"><a href="matching.html#cb152-51" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.19</span>)        (<span class="fl">0.22</span>)        (<span class="fl">0.23</span>)   </span>
<span id="cb152-52"><a href="matching.html#cb152-52" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-53"><a href="matching.html#cb152-53" aria-hidden="true" tabindex="-1"></a>orphdum           <span class="sc">-</span><span class="fl">0.32</span><span class="sc">*</span>         <span class="sc">-</span><span class="fl">0.22</span>        <span class="sc">-</span><span class="fl">0.37</span><span class="sc">*</span>   </span>
<span id="cb152-54"><a href="matching.html#cb152-54" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.18</span>)        (<span class="fl">0.18</span>)        (<span class="fl">0.21</span>)   </span>
<span id="cb152-55"><a href="matching.html#cb152-55" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-56"><a href="matching.html#cb152-56" aria-hidden="true" tabindex="-1"></a>natreg            <span class="fl">2.08</span><span class="sc">**</span><span class="er">*</span>       <span class="fl">1.88</span><span class="sc">**</span>       <span class="fl">2.42</span><span class="sc">**</span><span class="er">*</span>   </span>
<span id="cb152-57"><a href="matching.html#cb152-57" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.68</span>)        (<span class="fl">0.84</span>)        (<span class="fl">0.84</span>)   </span>
<span id="cb152-58"><a href="matching.html#cb152-58" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-59"><a href="matching.html#cb152-59" aria-hidden="true" tabindex="-1"></a>wpnoavg3         <span class="sc">-</span><span class="fl">0.50</span><span class="sc">**</span><span class="er">*</span>      <span class="sc">-</span><span class="fl">0.83</span><span class="sc">**</span><span class="er">*</span>      <span class="sc">-</span><span class="fl">0.74</span><span class="sc">**</span><span class="er">*</span>  </span>
<span id="cb152-60"><a href="matching.html#cb152-60" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.12</span>)        (<span class="fl">0.15</span>)        (<span class="fl">0.16</span>)   </span>
<span id="cb152-61"><a href="matching.html#cb152-61" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-62"><a href="matching.html#cb152-62" aria-hidden="true" tabindex="-1"></a>condavg3           <span class="fl">0.20</span>         <span class="fl">0.77</span><span class="sc">**</span><span class="er">*</span>       <span class="fl">0.41</span><span class="sc">**</span>   </span>
<span id="cb152-63"><a href="matching.html#cb152-63" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.16</span>)        (<span class="fl">0.25</span>)        (<span class="fl">0.19</span>)   </span>
<span id="cb152-64"><a href="matching.html#cb152-64" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-65"><a href="matching.html#cb152-65" aria-hidden="true" tabindex="-1"></a>vandavg3           <span class="fl">0.10</span>          <span class="fl">0.11</span>          <span class="fl">0.13</span>    </span>
<span id="cb152-66"><a href="matching.html#cb152-66" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.13</span>)        (<span class="fl">0.15</span>)        (<span class="fl">0.15</span>)   </span>
<span id="cb152-67"><a href="matching.html#cb152-67" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-68"><a href="matching.html#cb152-68" aria-hidden="true" tabindex="-1"></a>stafcder         <span class="sc">-</span><span class="fl">0.21</span><span class="sc">**</span><span class="er">*</span>      <span class="sc">-</span><span class="fl">0.16</span><span class="sc">**</span><span class="er">*</span>      <span class="sc">-</span><span class="fl">0.21</span><span class="sc">**</span><span class="er">*</span>  </span>
<span id="cb152-69"><a href="matching.html#cb152-69" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.02</span>)        (<span class="fl">0.03</span>)        (<span class="fl">0.03</span>)   </span>
<span id="cb152-70"><a href="matching.html#cb152-70" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-71"><a href="matching.html#cb152-71" aria-hidden="true" tabindex="-1"></a><span class="fu">I</span>(natreg2)       <span class="sc">-</span><span class="fl">1.01</span><span class="sc">**</span><span class="er">*</span>        <span class="sc">-</span><span class="fl">0.85</span>       <span class="sc">-</span><span class="fl">1.27</span><span class="sc">**</span>   </span>
<span id="cb152-72"><a href="matching.html#cb152-72" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.38</span>)        (<span class="fl">0.64</span>)        (<span class="fl">0.53</span>)   </span>
<span id="cb152-73"><a href="matching.html#cb152-73" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-74"><a href="matching.html#cb152-74" aria-hidden="true" tabindex="-1"></a>Constant          <span class="fl">6.13</span><span class="sc">**</span><span class="er">*</span>       <span class="fl">5.44</span><span class="sc">**</span><span class="er">*</span>      <span class="fl">6.18</span><span class="sc">**</span><span class="er">*</span>   </span>
<span id="cb152-75"><a href="matching.html#cb152-75" aria-hidden="true" tabindex="-1"></a>                  (<span class="fl">0.39</span>)        (<span class="fl">0.45</span>)        (<span class="fl">0.50</span>)   </span>
<span id="cb152-76"><a href="matching.html#cb152-76" aria-hidden="true" tabindex="-1"></a>                                                       </span>
<span id="cb152-77"><a href="matching.html#cb152-77" aria-hidden="true" tabindex="-1"></a>N                   <span class="dv">408</span>           <span class="dv">306</span>          <span class="dv">312</span>     </span>
<span id="cb152-78"><a href="matching.html#cb152-78" aria-hidden="true" tabindex="-1"></a>Log Likelihood   <span class="sc">-</span><span class="dv">1</span>,<span class="fl">224.86</span>      <span class="sc">-</span><span class="fl">973.75</span>      <span class="sc">-</span><span class="fl">955.59</span>   </span>
<span id="cb152-79"><a href="matching.html#cb152-79" aria-hidden="true" tabindex="-1"></a><span class="fu">chi2</span> (<span class="at">df =</span> <span class="dv">19</span>)   <span class="fl">200.57</span><span class="sc">**</span><span class="er">*</span>     <span class="fl">134.73</span><span class="sc">**</span><span class="er">*</span>    <span class="fl">156.01</span><span class="sc">**</span><span class="er">*</span>  </span>
<span id="cb152-80"><a href="matching.html#cb152-80" aria-hidden="true" tabindex="-1"></a><span class="er">=======================================================</span></span>
<span id="cb152-81"><a href="matching.html#cb152-81" aria-hidden="true" tabindex="-1"></a>Notes<span class="sc">:</span>           <span class="er">***</span>Significant at the <span class="dv">1</span> percent level.</span>
<span id="cb152-82"><a href="matching.html#cb152-82" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">**</span>Significant at the <span class="dv">5</span> percent level.</span>
<span id="cb152-83"><a href="matching.html#cb152-83" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">*</span>Significant at the <span class="dv">10</span> percent level.</span></code></pre></div>
<p>To some extent we are back where we started, the size of the estimated effect depends on the matching method. But at least you can select the matching method in an honest way - by evaluating balance - before you check to see what is significant or not.</p>
</div>
</div>
<div id="looking-ahead-multi-level-modeling" class="section level2" number="11.9">
<h2>
<span class="header-section-number">9</span> Looking ahead: multi-level modeling<a class="anchor" aria-label="anchor" href="#looking-ahead-multi-level-modeling"><i class="fas fa-link"></i></a>
</h2>
<p>Multi-level modeling exploits situations where you have observations nested in a hierarchy - individuals observed in neighborhoods, that are part of cities, nested in counties, nested in states, for instance.</p>
<p>We could include variables from various levels in our individual-level model. The top-level data can help improve our lower-level, individual-level, estimates.</p>
<p>One focus of class will be a recent piece on the US congress: <span class="citation"><a href="references.html#ref-park2021" role="doc-biblioref">Park</a> (<a href="references.html#ref-park2021" role="doc-biblioref">2021</a>)</span></p>
<p>This piece is interesting and useful for a couple of reasons and merits a careful read:</p>
<ul>
<li><p>The work is nicely located in the literature on Congress. If you are working on the reading list in American politics for your comprehensive exam, you will see several classic and recent work from the list.</p></li>
<li><p>The dependent variable - grand-standing - is a meticulously crafted measure that uses congressional statements and machine learning to identify when members of Congress are engaged in message politics.</p></li>
<li><p>The modeling strategy uses multi-level approaches, leveraging the fact that individual members are in committees, and in particular Congresses. (And there is also an application of matching)</p></li>
</ul>
<p>All of the replication data and R code are available at the Harvard Dataverse.</p>

<!-- Run common_r first if using as a Notebook -->
<!--
See the email from Naomi Bick for the ICPSR multilevel modeling syallbus
And the syllabus for the class offered by Jeff Gill at American University
-->
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="quasi--and-natural-experiments.html">Quasi- and natural experiments</a></div>
<div class="next"><a href="multilevel-and-hierarchical-models.html">Multilevel and hierarchical models</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#matching">Matching</a></li>
<li><a class="nav-link" href="#what-is-matching"><span class="header-section-number">11.5</span> What is matching?</a></li>
<li><a class="nav-link" href="#describing-treatment-effects-1"><span class="header-section-number">11.6</span> Describing treatment effects</a></li>
<li>
<a class="nav-link" href="#why-use-matching"><span class="header-section-number">11.7</span> Why use matching?</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#the-method-of-matching-matters"><span class="header-section-number">11.7.1</span> The method of matching matters</a></li></ul>
</li>
<li>
<a class="nav-link" href="#two-applications"><span class="header-section-number">11.8</span> Two applications</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#union-membership-and-campaign-activity"><span class="header-section-number">11.8.1</span> Union membership and campaign activity</a></li>
<li><a class="nav-link" href="#fda-drug-approval-times"><span class="header-section-number">11.8.2</span> FDA drug approval times</a></li>
<li><a class="nav-link" href="#estimating-the-lognormal-duration-model-with-3-samples"><span class="header-section-number">11.8.3</span> Estimating the lognormal duration model with 3 samples</a></li>
</ul>
</li>
<li><a class="nav-link" href="#looking-ahead-multi-level-modeling"><span class="header-section-number">11.9</span> Looking ahead: multi-level modeling</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Political Science and Applied Statistics using R</strong>" was written by J.K. Corder. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
